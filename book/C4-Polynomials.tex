\documentclass[DynamicalBook]{subfiles}
\begin{document}
%


\setcounter{chapter}{3}%Just finished 3.


%------------ Chapter ------------%
\chapter{Polynomial functors and dynamics}

\slogan{
The category of polynomial functors is a jackpot. Its beauty flows without bound.}

%-------- Section --------%
\section{Introduction}


In this chapter we will investigate a remarkable category called $\poly$. We will see its intimate relationship with both dynamic processes, data storage and transformations, and decision-making. We will see its intimate relationship with safety and decision-making. But our story begins with something quite humble: middle school algebra.
\begin{align}\label{eqn.polynomial1892}
\yon^2+\yon+1 \quad&\quad
\textit{polynomial}
\intertext{
All our polynomials will involve one variable, $\yon$, chosen for reasons we'll explain soon. Polynomials in one variable can be depicted as a set of mini-trees:
}
\label{eqn.poly1892}
\begin{tikzpicture}[trees, grow'=up]
  \node (1) {$\bullet$} 
    child {}
    child {};
  \node[right=.5 of 1] (2) {$\bullet$} 
    child {};
  \node[right=.5 of 2] (3) {$\bullet$};
\end{tikzpicture}
\quad&\quad\textit{poly}
\end{align}
More technically, mini-trees are called \emph{corollas}, so what we're calling a \emph{poly} is a set of corollas. 

Intuitively, one might think of each corolla as representing a \emph{decision}. Associated to every decision is a set of \emph{options}. The three decisions we exhibit in \cref{eqn.poly1892} are particularly interesting; they respectively have two options, one options, and no options. Having two options is familiar from life---it's the classic yes/no decision---as well as from Claude Shannon's Information Theory. Having one option is also familiar theoretically and in life: ``sorry, ya just gotta go through it.'' Having no options is when you actually don't get through it: it's ``the end''. While the corollas $1,\yon,$ and $\yon^2$ are each interesting as decisions, their sum $\yon^2+\yon+1$ has very little theoretical interest; it's just a first example.

In a polynomial like $42\yon^3+17\yon$, the pure power term $\yon^3$ has a coefficient of 42 next to it, so the corolla with three leaves shows up 42 times in the associated poly. Intuitively, there are 42 situations in which you have a decision with three options.

\[
\begin{tabular}{llll}
\multicolumn{4}{c}{\large Terminology}\\
\textbf{Overarching} & \textbf{Polynomial} $p$ & \textbf{Poly} & \textbf{Intuitive}\\\hline
Set of positions & $p(1)$ & Set of roots & Set of situations\\
Interface in position $i$ & Pure power summand $\yon^{p_i}$ & Corolla & Decision\\
Distinction $d\in p_i$ & Element of $p_i$ & Leaf & Option
\end{tabular}
\]

\begin{exercise}
Consider the polynomial $2\yon^3+2\yon+1$ and the associated poly.
\begin{enumerate}
	\item Draw the poly.
	\item How many roots does this poly have?
	\item How many decisions does this represent?
	\item For each corolla in the poly, say how many leaves it has.
	\item For each decision, how many options does it have?
	\item Does the polynomial $\yon^\nn+4\yon$ have a representable summand $\yon^2$?
	\qedhere
\end{enumerate}

\end{exercise}

Mathematically and notationally we do not make a distinction between a poly and its name $p$; they are two different syntaxes for the same object. 


\begin{exercise}
If you were a suitor choosing the poly you love, aesthetically speaking, which would strike your interest? Answer by circling the associated polynomial:
\begin{enumerate}
	\item $\yon^2+\yon+1$
	\item $\yon^2+3\yon^2+3\yon+1$
	\item $\yon^2$
	\item $\yon+1$
	\item $(\nn\yon)^\nn$
	\item $S\yon^S$
	\item $\yon^{100}+\yon^2+3\yon$
	\item Your poly's name $p$ here.
\end{enumerate}
Any reason for your choice?
\end{exercise}

But before we get into the details, let's say where we're going: polynomials are going to have really surprising applications to dynamics, data, and decision. Remember, we spoke superlatively of $\poly$ at the beginning of this chapter,
\slogan{
The category of polynomial functors is a jackpot. Its beauty flows without bound}
and we have not yet begun to deliver. So let's introduce some of the applications and mathematics to come.

%---- Subsection ----%
\subsection{Dynamical systems}

Throughout this book, we've seen dynamical systems---machines of various sorts---which have an internal state that can be read out to other systems, as well as updated based on input received from other systems. In the context of this chapter, we'll be looking mainly at deterministic systems, but with a lot of interesting new possibilities:
\begin{enumerate}
	\item The interface of the system can change shape through time.
	\item The wiring diagram connecting a bunch of systems can change in time.
	\item One can speed up the dynamics of a system.
	\item One can introduce ``effects'', i.e.\ as defined by monads on $\smset$.
	\item The dynamical systems on any interface form a topos.
\end{enumerate}

To give some intuition for the first two, imagine yourself as a system, wired up to other systems. You have some input ports: your eyes, your ears, etc., and you have some output ports: your speech, your gestures, etc. And you connect with other systems: your family, your colleagues, the GPS of your phone, etc.
\begin{equation}\label{eqn.wired_forever}
\begin{tikzpicture}[oriented WD, bb min width =.5cm, bbx=.5cm, bb port sep =1,bb port length=0, bby=.15cm]
	\node[bb={2}{2}, green!25!black] (X11) {\tiny Alice};
	\node[bb={3}{3}, green!25!black, below right=of X11] (X12) {\tiny you};
	\node[bb={2}{1}, green!25!black, above right=of X12] (X13) {\tiny Bob};
	\node[bb={2}{2}, green!25!black, below right = -1 and 1.5 of X12] (X21) {\tiny GPS};
	\node[bb={1}{2}, green!25!black, above right=-1 and 1 of X21] (X22) {\tiny me};
  \node[bb={2}{2}, fit = {($(X11.north east)+(-1,4)$) (X12) (X13) ($(X21.south)$) ($(X22.east)+(.5,0)$)}, bb name = {\small Wired together like this forever?}] (Z) {};
	\draw (X21_out1) to (X22_in1);
	\draw let \p1=(X22.north east), \p2=(X21.north west), \n1={\y1+\bby}, \n2=\bbportlen in
          (X22_out1) to[in=0] (\x1+\n2,\n1) -- (\x2-\n2,\n1) to[out=180] (X21_in1);
	\draw (X11_out1) to (X13_in1);
	\draw (X11_out2) to (X12_in1);
	\draw (X12_out1) to (X13_in2);
	\draw (Z_in1'|-X11_in2) to (X11_in2);	
	\draw (Z_in2'|-X12_in2) to (X12_in2);
	\draw (X12_out2) to (X21_in2);
	\draw (X21_out2) to (Z_out2'|-X21_out2);
	 \draw let \p1=(X12.south east), \p2=(X12.south west), \n1={\y1-\bby}, \n2=\bbportlen in
	  (X12_out3) to[in=0] (\x1+\n2,\n1) -- (\x2-\n2,\n1) to[out=180] (X12_in3);
	\draw let \p1=(X22.north east), \p2=(X11.north west), \n1={\y2+\bby}, \n2=\bbportlen in
          (X22_out2) to[in=0] (\x1+\n2,\n1) -- (\x2-\n2,\n1) to[out=180] (X11_in1);
	\draw (X13_out1) to (Z_out1'|-X13_out1);
\end{tikzpicture}
\end{equation}
We wrote a little question for you at the top of the diagram. Isn't there something a little funny about wiring diagrams? Maybe for old-fashioned machines, you would wire things together once and they'd stay like that for the life of the machine. But my phone connects to different wifi stations at different times, I drop my connection to Alice for weeks at a time, etc. So wiring diagrams should be able to change in time; $\poly$ will let us do that.

But there's more that's intuitively wrong or limiting about the picture in \eqref{eqn.wired_forever}. Ever notice how your very ports can change in time? Sometimes I close my eyes, which makes that way of sending me information inaccessible: the port vanishes. Sometimes I'm in a tunnel and my phone can't receive GPS. Sometimes I extend my hand to give or receive an object from another person, but sometimes I don't. My ports themselves change in time. Sometimes I even use my output ports to determine the wiring pattern of other machines. We will be able to say all this using $\poly$.

But there's even more that's wrong with the above description. Namely, when I move my eyes, that's actually something you can see. When I turn around, I see different things, and \emph{you can notice I'm turned around}! When I use my muscles or mouth to express things, my very position changes: my tongue moves, my body moves. So my output is actually achieved by changing position. The model in $\poly$ will be able to express this too.

%---- Subsection ----%
\subsection{Data}

Data is information, maybe thought of as quantized into atomic pieces, but were these atomic pieces are somehow linked by a conceptual structure. When a person or organization uses certain data repeatedly, they often find it useful to put it in a database. A database is a conceptual structure filled with examples.

For example, imagine that you have to constantly look up employees, what department they're in, who the admin person is for that department, who their manager is, etc. Here's an associated database
\[
\tiny\cat{C}\coloneqq
\boxCD{
\begin{tikzcd}[row sep=large, ampersand replacement = \&]
 	\LTO{Employee}\ar[rr, shift left, "\text{WorksIn}"]\ar[dr, bend right, "\text{FName}"']\ar[loop left, "\text{Mngr}"]\&\&
  \LTO{Department}\ar[ll, shift left, "\text{Admin}"]\ar[dl, bend left, "\text{DName}"]\\
  \&\LTO{String}
\end{tikzcd}
\\~\\\tiny
  Department.Admin.WorksIn = Department
}
\]

\[\tiny
\begin{tabular}{ c | c  c  c}
  \textbf{Employee}&\textbf{FName}&\textbf{WorksIn}&\textbf{Mngr}\\\hline
  1&Alan&101&2\\
  2&Ruth&101&2\\
  3&Carla&102&3
\end{tabular}
\hspace{.5in}
\begin{tabular}{ c | c  c}
  \textbf{Department}&\textbf{DName}&\textbf{Admin}\\\hline
  101&Sales&1\\
  102&IT&3\\~
\end{tabular}
\hspace{.5in}
\begin{tabular}{ c |}
	\textbf{String}\\\hline
	Alan\\
	IT\\[-3pt]
	\resizebox{!}{10pt}{$\vdots$}
\end{tabular}
\]

%---- Subsection ----%
\subsection{Decision theory}


Here's a pretty thing we're getting to: the decision stream.
\begin{equation}\label{eqn.trees_comp}
\begin{tikzpicture}[trees, grow'=up]
	\node (p3) {
  \begin{tikzpicture}[trees, grow'=up]
    \node (a) {$\bullet$}[sibling distance=.75cm] 
      child {[fill]
      	node[left=-3pt] {$\bullet$}[sibling distance=.3cm]
				  child {node (x) {}} child 
			}
      child {[fill]
      	node[left=-3pt] {$\bullet$}[sibling distance=.3cm]
				  child child
  		};
    \node (b) [right=1.5 of a] {$\bullet$} 
      child {[fill]
      	node[left=-3pt] {$\bullet$}[sibling distance=.3cm]
				  child child
			}
      child {[fill]
      	node[left=-3pt] {$\bullet$}
  		};
    \node (c) [right=1 of b]{$\bullet$}
      child {[fill]
      	node[left=-3pt] {$\bullet$}
			}
      child {[fill]
      	node[left=-3pt] {$\bullet$}[sibling distance=.3cm]
				  child child
  		};
    \node (d) [right=1 of c]{$\bullet$} 
      child {[fill]
      	node[left=-3pt] {$\bullet$}
			}
      child {[fill]
      	node[left=-3pt] {$\bullet$}
  		};		
     \node (e) [right=1 of d] {$\bullet$};
    \node[draw, fill=yellow!80!black, opacity=0.2, rounded corners=5pt, inner sep=5pt, fit=(x) (e)] (y) {};	
  \end{tikzpicture}
   };
\end{tikzpicture}
\end{equation}

%---- Subsection ----%
\subsection{Implementation}

%---- Subsection ----%
\subsection{Mathematical theory}

%-------- Section --------%
\section{Dynamical systems}



\end{document}
